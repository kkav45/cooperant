# üêõ –Ø–ù–î–ï–ö–°.–î–ò–°–ö | –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

## üîç –ü—Ä–æ–±–ª–µ–º–∞: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–î–æ–±–∞–≤–ª–µ–Ω –∞–ª–∏–∞—Å —Ñ—É–Ω–∫—Ü–∏–∏:**
   - `window.connectYandexDiskAuth = connectYandexDisk`

2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω OAuth scope:**
   - –ë—ã–ª–æ: `cloud_api:disk.app_folder`
   - –°—Ç–∞–ª–æ: `disk:app_folder` ‚úÖ

3. **–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:**
   - `yandex-disk-integration-v2.js` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - `index-cabinet-v2.html` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - `test-yandex-oauth.html` - –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

---

## üß™ –®–∞–≥ 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OAuth

### –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
```
test-yandex-oauth.html
```

### –ù–∞–∂–º–∏—Ç–µ "üîê –ù–∞—á–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é"
1. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å–∞
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –¥–∏—Å–∫—É
4. –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω** - OAuth —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå **–û—à–∏–±–∫–∞** - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Client ID –∏ Redirect URI

---

## üîß –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ OAuth

### –û—Ç–∫—Ä–æ–π—Ç–µ –Ø–Ω–¥–µ–∫—Å OAuth Console
https://oauth.yandex.ru/client/new

### –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
**Client ID:** `3772de21483443aba93e1889bd7ca4dc`

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### ‚úÖ Redirect URI
–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –¢–û–ß–ù–û —É–∫–∞–∑–∞–Ω:
```
https://kkav45.github.io/cooperant/yandex-auth-callback.html
```

**–í–∞–∂–Ω–æ:** 
- –ë–µ–∑ trailing slash (`/`) –≤ –∫–æ–Ω—Ü–µ
- –¢–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `YANDEX_DISK_CONFIG.REDIRECT_URI`

#### ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω—ã:
- ‚úÖ `disk:app_folder` - –î–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ `cloud_api:disk.app_folder` - (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

## üîß –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```
start.html ‚Üí –ö–∞–±–∏–Ω–µ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–∞
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
–°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[Yandex]`

### 3. –ù–∞–∂–º–∏—Ç–µ "üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"

### 4. –ù–∞–∂–º–∏—Ç–µ "‚òÅÔ∏è –ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫"

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
```
[Yandex] –û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...
[Yandex] URL: https://oauth.yandex.ru/authorize?...
```

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. "Redirect URI mismatch"
**–ü—Ä–æ–±–ª–µ–º–∞:** Redirect URI –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç  
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ OAuth Console
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–µ—Ç `/` –≤ –∫–æ–Ω—Ü–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `yandex-disk-integration-v2.js` (—Å—Ç—Ä–æ–∫–∞ 70)

### 2. "Invalid client_id"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π Client ID  
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Client ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ –≤ OAuth Console

### 3. "Token not received"
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–∫–µ–Ω –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è  
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `response_type=token` –≤ URL
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `yandex-auth-callback.html` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –≤ callback –æ–∫–Ω–µ

### 4. "Popup blocked"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ  
**–†–µ—à–µ–Ω–∏–µ:**
1. –†–∞–∑—Ä–µ—à–∏—Ç–µ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞ –¥–ª—è —Å–∞–π—Ç–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test-yandex-oauth.html` –¥–ª—è —Ç–µ—Å—Ç–∞

---

## üìä –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
window.YANDEX_DEBUG = true;
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏
```
[Yandex] Yandex Disk Integration v2.0 –∑–∞–≥—Ä—É–∂–µ–Ω ‚úÖ
[Yandex] –û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏... ‚ÑπÔ∏è
[Yandex] –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω ‚úÖ
[Yandex] –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ ‚úÖ
[Yandex] –ü–∞–ø–∫–∞ –ö–û–û–ü–ï–†–ê–ù–¢ –≥–æ—Ç–æ–≤–∞ ‚úÖ
[Yandex] –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã ‚úÖ
```

### –û—à–∏–±–∫–∏
```
[Yandex] ‚ö†Ô∏è Redirect URI –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å ‚ö†Ô∏è
[Yandex] –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚ùå
[Yandex] –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ‚ùå
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —à–∞–≥–∞–º

### –ß–µ–∫-–ª–∏—Å—Ç

#### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [ ] Client ID —É–∫–∞–∑–∞–Ω –≤–µ—Ä–Ω–æ
- [ ] Redirect URI —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Ç–æ—á–Ω–æ
- [ ] Scope = `disk:app_folder`

#### 2. OAuth Console
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ
- [ ] –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤—ã–¥–∞–Ω—ã
- [ ] Redirect URI —É–∫–∞–∑–∞–Ω –≤–µ—Ä–Ω–æ

#### 3. –§–∞–π–ª—ã
- [ ] `yandex-disk-integration-v2.js` –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] `yandex-auth-callback.html` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] `index-cabinet-v2.html` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 4. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- [ ] –û–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] –¢–æ–∫–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
- [ ] –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage

#### 5. –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [ ] –ü–∞–ø–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ
- [ ] –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- [ ] –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è

---

## üõ†Ô∏è –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞

### –í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
console.log('Token:', localStorage.getItem('yandexDiskToken'));

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–ø–∫–∏
console.log('Folder:', localStorage.getItem('yandexCooperativFolderId'));

// –¢–µ—Å—Ç API
fetch('https://cloud-api.yandex.net/v1/disk/resources?path=app-folder:/', {
    headers: {
        'Authorization': `OAuth ${localStorage.getItem('yandexDiskToken')}`
    }
})
.then(r => r.json())
.then(d => console.log('API Response:', d))
.catch(e => console.error('API Error:', e));
```

---

## üìû –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

### 1. –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞

```javascript
// –û—á–∏—Å—Ç–∏—Ç–µ –≤—Å—ë
localStorage.removeItem('yandexDiskToken');
localStorage.removeItem('yandexCooperativFolderId');
localStorage.removeItem('yandexLastSync');
localStorage.removeItem('yandexDiskDisabled');

// –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
location.reload();
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏
console.log('Yandex Integration Version:', 
    document.querySelector('script[src*="yandex-disk"]')?.src);
```

### 3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://oauth.yandex.ru/client/new
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π Client ID
4. –û–±–Ω–æ–≤–∏—Ç–µ –≤ `yandex-disk-integration-v2.js` (—Å—Ç—Ä–æ–∫–∞ 58)

---

## ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. ‚úÖ –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
2. ‚úÖ –ü–∞–ø–∫–∞ `/–ö–û–û–ü–ï–†–ê–ù–¢/` —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ
3. ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
4. ‚úÖ –ö–Ω–æ–ø–∫–∏ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å" –∏ "–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è" —Ä–∞–±–æ—Ç–∞—é—Ç
5. ‚úÖ –°—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "‚úÖ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω"

---

**–í–µ—Ä—Å–∏—è:** 2.0  
**–î–∞—Ç–∞:** 21 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã
