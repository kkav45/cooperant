# ‚úÖ –Ø–ù–î–ï–ö–°.–î–ò–°–ö | –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –í –¢–û–ú –ñ–ï –û–ö–ù–ï

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

**–†–∞–Ω—å—à–µ:** –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–∫—Ä—ã–≤–∞–ª–∞—Å—å –≤ popup –æ–∫–Ω–µ ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞—Å—å –±—Ä–∞—É–∑–µ—Ä–æ–º  
**–¢–µ–ø–µ—Ä—å:** –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **–≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ** ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç! ‚úÖ

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```
   start.html ‚Üí –ö–∞–±–∏–Ω–µ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–∞ ‚Üí index-cabinet-v2.html
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```
   –õ–µ–≤–æ–µ –º–µ–Ω—é ‚Üí ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
   ```

3. **–ù–∞–∂–º–∏—Ç–µ "üîê –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å":**
   - –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –Ø–Ω–¥–µ–∫—Å OAuth
   - –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ –Ø–Ω–¥–µ–∫—Å–µ
   - –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –¥–∏—Å–∫—É
   - –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - ‚úÖ –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:**
   ```
   test-yandex-direct.html
   ```

2. **–ù–∞–∂–º–∏—Ç–µ "üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–≤ —ç—Ç–æ–º –æ–∫–Ω–µ)":**
   - –ü—Ä–æ–π–¥–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
   - –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API:**
   - –ù–∞–∂–º–∏—Ç–µ "üìä –¢–µ—Å—Ç API"
   - ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```
   start.html ‚Üí –ö–∞–±–∏–Ω–µ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–∞
   ```

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
```javascript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫—É–¥–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è
sessionStorage.setItem('yandex_return_url', window.location.href);

// –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
window.location.href = authUrl;
```

### 2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –Ø–Ω–¥–µ–∫—Å–µ
```
https://oauth.yandex.ru/authorize?
  response_type=token&
  client_id=3772de21483443aba93e1889bd7ca4dc&
  redirect_uri=https://kkav45.github.io/cooperant/yandex-auth-callback.html&
  scope=cloud_api:disk.app_folder
```

### 3. –í–æ–∑–≤—Ä–∞—Ç —Å —Ç–æ–∫–µ–Ω–æ–º
```
https://kkav45.github.io/cooperant/yandex-auth-callback.html#access_token=y0_AgA...
```

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞
```javascript
// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ hash
token = hashParams.get('access_token');

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
localStorage.setItem('yandexDiskToken', token);

// –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
window.location.href = returnUrl;
```

---

## ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:**

1. ‚úÖ **–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ:**
   ```
   ‚úÖ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω!
   ```

2. ‚úÖ **–°—Ç–∞—Ç—É—Å –≤ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏:**
   ```
   ‚úÖ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω
   –ü–∞–ø–∫–∞: –ö–û–û–ü–ï–†–ê–ù–¢
   [üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å]
   [üíæ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è]
   [üö™ –í—ã–π—Ç–∏]
   ```

3. ‚úÖ **–¢–æ–∫–µ–Ω –≤ localStorage:**
   ```javascript
   localStorage.getItem('yandexDiskToken')
   // y0_AgA...
   ```

---

## üìÅ –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `yandex-disk-integration-v2.js` | ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ |
| `index-cabinet-v2.html` | ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å —Ç–æ–∫–µ–Ω–æ–º |
| `yandex-auth-callback.html` | ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| `test-yandex-direct.html` | ‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ |

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞"
**–ü—Ä–∏—á–∏–Ω–∞:** Popup –æ–∫–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ (–∫–∞–∫ —Å–µ–π—á–∞—Å)

### "invalid_scope"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –≤—ã–±—Ä–∞–Ω—ã –ø—Ä–∞–≤–∞ –≤ OAuth Console  
**–†–µ—à–µ–Ω–∏–µ:** –í—ã–±–µ—Ä–∏—Ç–µ `cloud_api:disk.app_folder` –≤ –Ø–Ω–¥–µ–∫—Å OAuth Console

### "Redirect URI mismatch"
**–ü—Ä–∏—á–∏–Ω–∞:** URI –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ OAuth Console —É–∫–∞–∑–∞–Ω–æ:
```
https://kkav45.github.io/cooperant/yandex-auth-callback.html
```

### –¢–æ–∫–µ–Ω –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** –û—á–∏—â–∞–µ—Ç—Å—è localStorage  
**–†–µ—à–µ–Ω–∏–µ:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã

---

## üìä –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```
[Yandex] –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é...
[Yandex] –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω
[Yandex] –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
[Yandex] –ü–∞–ø–∫–∞ –ö–û–û–ü–ï–†–ê–ù–¢ –≥–æ—Ç–æ–≤–∞
[Yandex] –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
```

### –û—à–∏–±–∫–∏
```
[Yandex] ‚ö†Ô∏è Redirect URI –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å
[Yandex] –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
[Yandex] –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

---

## üéØ –ò—Ç–æ–≥

**–¢–µ–ø–µ—Ä—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **–≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ** (–Ω–µ popup)
2. ‚úÖ **–ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è** –±—Ä–∞—É–∑–µ—Ä–æ–º
3. ‚úÖ –¢–æ–∫–µ–Ω **—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
4. ‚úÖ **–í–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

**–í–µ—Ä—Å–∏—è:** 2.3  
**–î–∞—Ç–∞:** 21 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ)
