# üöÄ –Ø–ù–î–ï–ö–°.–î–ò–°–ö | –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

## ‚ö° –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

–°–æ–∑–¥–∞–Ω–∞ **—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç **–≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ** (–±–µ–∑ popup).

---

## üß™ –®–∞–≥ 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
```
test-yandex-direct.html
```

### –ù–∞–∂–º–∏—Ç–µ "üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–≤ —ç—Ç–æ–º –æ–∫–Ω–µ)"
1. –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –Ø–Ω–¥–µ–∫—Å OAuth
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ –Ø–Ω–¥–µ–∫—Å–µ
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –¥–∏—Å–∫—É
4. –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ `yandex-auth-callback.html`
5. –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω** - –ü–æ—è–≤–∏—Ç—Å—è –∑–µ–ª—ë–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ **–¢–æ–∫–µ–Ω –≤ localStorage** - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–æ–≥–µ

### –ù–∞–∂–º–∏—Ç–µ "üìä –¢–µ—Å—Ç API"
–ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Ç–æ–∫–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–æ–º API

---

## üè† –®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```
start.html ‚Üí –ö–∞–±–∏–Ω–µ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–∞ ‚Üí index-cabinet-v2.html
```

### –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```
–õ–µ–≤–æ–µ –º–µ–Ω—é ‚Üí ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
- ‚úÖ **–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω** - –¢–æ–∫–µ–Ω –Ω–∞–π–¥–µ–Ω
- ‚ùå **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫** - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å

---

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ
```javascript
// –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ (–Ω–µ popup)
window.location.href = authUrl;
```

### 2. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ callback
```
https://kkav45.github.io/cooperant/yandex-auth-callback.html#access_token=XXX
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞
```javascript
// yandex-auth-callback.html –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
// 1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ hash
// 2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ localStorage
// 3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω —É—Å–ø–µ—Ö–∞
```

### 4. –í–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```javascript
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
window.location.href = 'start.html';
```

---

## üìÅ –§–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `test-yandex-direct.html` | ‚úÖ –¢–µ—Å—Ç OAuth (–≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ) |
| `yandex-auth-callback.html` | ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ) |
| `yandex-disk-integration-v2.js` | ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ) |
| `index-cabinet-v2.html` | ‚úÖ –ö–∞–±–∏–Ω–µ—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π |

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –¢–µ—Å—Ç OAuth
- [ ] –û—Ç–∫—Ä–æ–π—Ç–µ `test-yandex-direct.html`
- [ ] –ù–∞–∂–º–∏—Ç–µ "üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è"
- [ ] –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ –Ø–Ω–¥–µ–∫—Å–µ
- [ ] –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –¥–∏—Å–∫—É
- [ ] –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
- [ ] ‚úÖ –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω

### 2. –¢–µ—Å—Ç API
- [ ] –ù–∞–∂–º–∏—Ç–µ "üìä –¢–µ—Å—Ç API"
- [ ] ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–∞–ø–∫–∞ –Ω–∞–π–¥–µ–Ω–∞)

### 3. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- [ ] –û—Ç–∫—Ä–æ–π—Ç–µ `start.html`
- [ ] –í—ã–±–µ—Ä–∏—Ç–µ "–ö–∞–±–∏–Ω–µ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–∞"
- [ ] –û—Ç–∫—Ä–æ–π—Ç–µ "üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"
- [ ] ‚úÖ –°—Ç–∞—Ç—É—Å: "–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω"

---

## üêõ –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Client ID
–û—Ç–∫—Ä–æ–π—Ç–µ `test-yandex-direct.html` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Client ID —Å–æ–≤–ø–∞–¥–∞–µ—Ç:
```
3772de21483443aba93e1889bd7ca4dc
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redirect URI
–í [–Ø–Ω–¥–µ–∫—Å OAuth Console](https://oauth.yandex.ru/client/new):
```
https://kkav45.github.io/cooperant/yandex-auth-callback.html
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
```
[Yandex Callback] –¢–æ–∫–µ–Ω –Ω–∞–π–¥–µ–Ω –≤ hash
[Yandex Callback] –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ localStorage
```

### 4. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à
```javascript
localStorage.removeItem('yandexDiskToken');
location.reload();
```

---

## üìä –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```
[14:54:38] –ù–∞—á–∞–ª–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...
[14:54:38] URL: https://oauth.yandex.ru/authorize?...
[14:55:00] DOM –∑–∞–≥—Ä—É–∂–µ–Ω
[14:55:00] –¢–æ–∫–µ–Ω –Ω–∞–π–¥–µ–Ω –≤ hash: y0_AgA...
[14:55:00] –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ localStorage
[14:55:00] –ü–æ–∫–∞–∑–∞–Ω —ç–∫—Ä–∞–Ω —É—Å–ø–µ—Ö–∞
```

### –û—à–∏–±–∫–∞
```
[14:54:38] –¢–æ–∫–µ–Ω –ù–ï –Ω–∞–π–¥–µ–Ω –≤ URL
[14:54:38] –ü–æ–∫–∞–∑ –æ—à–∏–±–∫–∏: –¢–æ–∫–µ–Ω –Ω–µ –ø–æ–ª—É—á–µ–Ω
```

---

## üéØ –ò—Ç–æ–≥

**–†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å:**

1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ `test-yandex-direct.html`
2. ‚úÖ –ü—Ä–æ–π–¥–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–æ–∫–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç (–¢–µ—Å—Ç API)
4. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

**–í–µ—Ä—Å–∏—è:** 2.1  
**–î–∞—Ç–∞:** 21 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–≤ —Ç–æ–º –∂–µ –æ–∫–Ω–µ)
